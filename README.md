# ТЕСТОВОЕ ЗАДАНИЕ:

### Технологии:
- **FastApi**
- **docker-compose**
- **PostgreSQL**
- **SQLAlchemy**
- **Телеграм бот**
___
### **Задача:** *реализовать микросервисное веб приложение для мониторинга цен на любом сайте, например, мвидео.*
___
### Необходимо предусмотреть следующий функционал:
1. **Модуль HTTP API**  С использованием библиотеки FastApi.
Он должен содержать следующие маршруты:
    * Добавление нового товара на мониторинг (ссылка на товар)
    * Удаление товара
    * Получение списка товаров на мониторинге
    * Получение истории цен на товар.
2. **Телеграм бот** с аналогичным функционалом
3. **Модуль мониторинга**, который будет периодически получать новую цену товара:
    * При добавлении товара, необходимо получать только его название, 
    описание и рейтинг (если есть).
    * Получать информацию можно просто через requests.
    * Записывать цену на товар необходимо раз в час.
4. **БД** для хранения информации (PostgreSQL)
___
### Важные моменты:
- Запуск кода через docker-compose, каждый модуль в отдельном контейнере.
    Как минимум модуль БД должен иметь volume для сохранения информации в нем.
- Для работы с базой использовать либу SQLAlchemy.
- Если будет время и желание, то кроме маршрутов бекенда, 
    можно ещё сделать странички для этих маршрутов с помощью шаблонов Jinja2
    и обмазать bootstrapовскими классами для красоты,
    но это вообще не обязательно.
___
# ИНСТРУКЦИЯ

## ПЕРВИЧНАЯ ПОДГОТОВКА:
 * В телеграмме обратитесь к боту [@BotFather](https://t.me/BotFather) и создайте нового бота, получите у него **токен**, а так же сразу отправьте боту любое сообщение **ЭТО ВАЖНО!**.
 * Опять же в ТГ обратитесь к боту [@getmyid_bot](https://t.me/getmyid_bot), отправьте ему любое сообщение и он пришлёт вам ваш **ID** в ТГ.
 * Для данных PostgreSQL: 
 1. Установите PostgreSQL, скачав его с официального сайта postgresql.org.
 2. После установки в консоли введите: ```sudo -u postgres psql```
 * Это откроет консоль PostgreSQL
 3. Создайте базу данных командой: ```CREATE DATABASE mydatabase;```
 4. Создайте пользователя командой: ```CREATE USER myuser WITH PASSWORD 'mypassword';```
 5. Выдайте пользователю права доступа командой: ```GRANT ALL PRIVILEGES ON DATABASE mydatabase TO myuser;```

## ОСНОВНАЯ НАСТРОЙКА И СТАРТ:
 1. Откройте каталог **testovoe** в вашем **IDE** или через ***bash***.
 2. В файле **docker-compose.yaml** укажите данные, согласно комментариям...
 * ВАЖНО: строку **DB_HOST: "db"** во всех сервисах оставьте без изменений!, добавляйте только те параметры, у которых есть комментарии! в сервисе **aiogram_bot** в параметрах **TOKEN** и **ADMIN_ID** добавьте соответствующие данные полученые у ботов в телеграмме ранее.
 3. Находясь в каталоге через **IDE** или **bash**, выполните команду: ```docker-compose up --build```
 4. Дождитесь сборки образа и поднятия контейнеров... Можно пользоваться!
 * Опустить контейнеры можно командой: ```docker-compose down```, добавив флаг ```-v``` вы сможете удалить volume проекта.
